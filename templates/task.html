{% extends 'base.html' %}

{% block title %}
{{ task[1] }}
{% endblock %}

{% block content %}
<div class="row">
  <div class="column left">
    <h1>{{ task[1] }}</h1>
    {% if get_status() >= 2 %}
      <a href={{ url_for('modify_task', task_id=task[0]) }}>Muokkaa</a>
    {% endif %}
    <p>{{ task[2] | safe }}</p>
    <h3>Esimerkkejä</h3>
    <p>Lausekkeen tulisi hyväksyä seuraavat merkkijonot</p>
    <div>
      {% for s in accept %}
        <code>{{s}}</code> <br />
      {% endfor %}
    </div>

    <p>Lausekkeen tulisi hylätä seuraavat merkkijonot</p>
    <div>
      {% for s in reject %}
        <code>{{s}}</code> <br />
      {% endfor %}
    </div>

    {% if get_status() >= 1 %}
      <form action={{ url_for('task_info', task_id=task[0]) }} method="post"> 
        Vastaus: <input type="text" name="answer">
        <input type="submit" value="Lähetä">
      </form>
    {% else %}
      <p>Kirjaudu sisään, jotta voit lähettää vastauksen </p>
    {% endif %}
    <a href={{ url_for('task_view') }}>Tehtävälistalle</a>
  </div>
  {% if get_status() >= 1 %}
  <div class="column right">
    <h2>
      Lähetykset
    </h2>
    <ol>
      {% for result in results %}
        {{ result[0] }}. <a href={{ url_for('result', task_id=task[0], result_id=result[1][0]) }}>{{ result[1][3].strftime("%Y-%m-%d %H:%M:%S") }}</a> 
        status: 
        {% if result[1][4] == 0 %}
          Oikein
        {% elif result[1][4] <= 2 %}
          Väärin
        {% else %}
          Virhe
        {% endif %}
        <br />
      {% endfor %}
    </ol>
  </div>
  {% endif %}
</div>

{% endblock %}
